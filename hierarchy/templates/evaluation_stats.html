<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluation Statistics</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/common-navigation.css">
    <link rel="stylesheet" href="/static/css/evaluation_stats.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center my-4">Manual Evaluation Statistics</h1>
            </div>
        </div>

        <!-- Common Navigation -->
        <div class="row mb-3">
            <div class="col-12">
                <ul class="nav nav-pills" id="main-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/" data-path="/">
                            <i class="bi bi-diagram-3 nav-icon"></i>Hierarchy Visualizer
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/manual_evaluation" data-path="/manual_evaluation">
                            <i class="bi bi-card-checklist nav-icon"></i>Manual Evaluation
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/evaluation_stats" data-path="/evaluation_stats">
                            <i class="bi bi-bar-chart-line nav-icon"></i>Evaluation Statistics
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/duplicates" data-path="/duplicates">
                            <i class="bi bi-intersect nav-icon"></i>Duplicate Analysis
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div id="stats-container">
                    <div class="loading-placeholder">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2">Loading statistics...</p>
                    </div>
                    <!-- Stats card will be loaded here by JS -->
                </div>

                <!-- Filter Controls -->
                <div class="card stat-card mt-4">
                    <div class="card-header">Filter Problematic Terms</div>
                    <div class="card-body">
                        <p class="card-text small text-muted">Show terms where any of the selected criteria indicate a potential issue.</p>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input filter-checkbox" type="checkbox" value="importance" id="filter-importance" checked>
                                    <label class="form-check-label" for="filter-importance">
                                        Importance is 'General' or 'Not Academic'
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input filter-checkbox" type="checkbox" value="level" id="filter-level" checked>
                                    <label class="form-check-label" for="filter-level">
                                        Level Correctness is 'Higher' or 'Lower'
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input filter-checkbox" type="checkbox" value="potential_parents" id="filter-potential-parents">
                                    <label class="form-check-label" for="filter-potential-parents">
                                        Has Potential Missing Parents
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input filter-checkbox" type="checkbox" value="variations" id="filter-variations" checked>
                                    <label class="form-check-label" for="filter-variations">
                                        Any Incorrect Variations
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input filter-checkbox" type="checkbox" value="parents" id="filter-parents" checked>
                                    <label class="form-check-label" for="filter-parents">
                                        Any Incorrect Parent Relationships
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input filter-checkbox" type="checkbox" value="potential_variations" id="filter-potential-variations">
                                    <label class="form-check-label" for="filter-potential-variations">
                                        Has Potential Missing Variations
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 text-end">
                             <button class="btn btn-primary" id="apply-filters-btn">Apply Filters</button>
                        </div>
                    </div>
                </div>

                <!-- Problematic Terms List -->
                <div class="card stat-card mt-4">
                    <div class="card-header">
                        <a class="text-decoration-none" data-bs-toggle="collapse" href="#problematic-terms-collapse" role="button" aria-expanded="false" aria-controls="problematic-terms-collapse">
                            Problematic Terms List <i class="bi bi-chevron-down small"></i>
                        </a>
                    </div>
                    <div class="collapse show" id="problematic-terms-collapse"> <!-- Start expanded -->
                        <div class="card-body">
                            <ul class="list-group list-group-flush" id="problematic-terms-list">
                                <li class="list-group-item text-muted">Apply filters to see potentially problematic terms...</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Evaluated Terms List (Remains separate) -->
                <div class="card stat-card mt-4">
                    <div class="card-header">
                        <a class="text-decoration-none" data-bs-toggle="collapse" href="#evaluated-terms-collapse" role="button" aria-expanded="false" aria-controls="evaluated-terms-collapse">
                            Evaluated Terms List <i class="bi bi-chevron-down small"></i>
                        </a>
                    </div>
                    <div class="collapse" id="evaluated-terms-collapse">
                        <div class="card-body">
                            <ul class="list-group list-group-flush" id="evaluated-terms-list">
                                <li class="list-group-item text-muted">Loading evaluated terms...</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Evaluation Notes List -->
                <div class="card stat-card mt-4">
                    <div class="card-header">
                        <a class="text-decoration-none" data-bs-toggle="collapse" href="#evaluation-notes-collapse" role="button" aria-expanded="false" aria-controls="evaluation-notes-collapse">
                            Evaluation Notes <i class="bi bi-chevron-down small"></i>
                        </a>
                    </div>
                    <div class="collapse" id="evaluation-notes-collapse">
                        <div class="card-body" id="evaluation-notes-body">
                            <p class="text-muted">Loading evaluation notes...</p>
                            <!-- Notes will be populated here by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <script src="/static/js/common-navigation.js"></script>
    <script src="/static/js/evaluation_stats.js"></script>
</body>
</html> 